{% load i18n static %}
<!DOCTYPE html>
<html
  lang="{{ LANGUAGE_CODE }}"
  dir="{% if LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}"
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}H3 Auctions | Plates{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}" />
    <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}" />
    <link rel="stylesheet" href="{% static 'css/bootstrap.rtl.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/swiper-bundle.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}" />
    <link rel="stylesheet" href="{% static 'css/ad.css' %}" />
    <link rel="stylesheet" href="{% static 'css/filter.css' %}" />
    <link rel="stylesheet" href="{% static 'css/mediaqueries.css' %}" />
    <link rel="stylesheet" href="{% static 'css/footer.css' %}" />
    <link rel="stylesheet" href="{% static 'css/all.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/h3-colors.css' %}" />
    {% if SITE_SETTINGS and SITE_SETTINGS.logo %}
    <link rel="icon" href="{{ SITE_SETTINGS.logo.url }}" />
    {% endif %}
    <style>
      :root {
      	--h3-primary: {{ SITE_SETTINGS.primary_color|default:"#6f41a4" }};
      	--h3-secondary: {{ SITE_SETTINGS.secondary_color|default:"#ffffff" }};
      }
      /* Calculate darker and lighter shades from primary color */
      {% if SITE_SETTINGS %}
      :root {
      	--h3-primary-dark: color-mix(in srgb, var(--h3-primary) 80%, black);
      	--h3-primary-light: color-mix(in srgb, var(--h3-primary) 80%, white);
      }
      {% endif %}
    </style>
    {% block head %}{% endblock %} 
    {% if SITE_SETTINGS and SITE_SETTINGS.google_tag_id %}
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id={{ SITE_SETTINGS.google_tag_id }}"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "{{ SITE_SETTINGS.google_tag_id }}");
    </script>
    {% endif %}
  </head>
  <body>
    <nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary">
      <div class="container">
        <div class="navbar-toggler2">
          <button
            class="navbar-toggler collapsed"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasDarkNavbar"
            aria-controls="offcanvasDarkNavbar"
            aria-label="Toggle navigation"
          >
            <span class="toggler-icon top-bar"></span>
            <span class="toggler-icon middle-bar"></span>
            <span class="toggler-icon bottom-bar"></span>
          </button>
        </div>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0" dir="ltr">
            <li class="nav-item">
              <a href="/" class="navLink">{% trans "Home" %}</a>
            </li>
            <li class="nav-item">
              <a href="{% url 'plates:sell_plate' %}" class="navLink"
                >{% trans "Sell Your Plate" %}</a
              >
            </li>
            <li class="nav-item">
              <a href="{% url 'plates:draw_plate' %}" class="navLink"
                >{% trans "Design Your Plate" %}</a
              >
            </li>
            <li class="nav-item">
              <a href="{% url 'admin:index' %}" class="navLink"
                >{% trans "Login" %}</a
              >
            </li>
            <li class="nav-item">
              <a href="#" class="navLink">{% trans "FAQ" %}</a>
            </li>
            <li class="nav-item">
              <a href="{% url 'plates:contact' %}" class="navLink"
                >{% trans "Contact Us" %}</a
              >
            </li>
            <li>
              <form
                action="{% url 'set_language' %}"
                method="post"
                style="display: inline"
              >
                {% csrf_token %}
                <input
                  type="hidden"
                  name="next"
                  value="{{ request.get_full_path }}"
                />
                {% if LANGUAGE_CODE == 'ar' %}
                <a
                  class="btnPage1"
                  href="#"
                  onclick="this.closest('form').submit(); return false;"
                  >English</a
                >
                <input type="hidden" name="language" value="en" />
                {% else %}
                <a
                  class="btnPage1"
                  href="#"
                  onclick="this.closest('form').submit(); return false;"
                  >العربية</a
                >
                <input type="hidden" name="language" value="ar" />
                {% endif %}
              </form>
            </li>
          </ul>
        </div>
        <a class="navbar-brand" href="/">
          <img id="logo" src="{% static 'css/logo.svg' %}" alt="H3 Auctions" />
        </a>
        <div
          class="offcanvas offcanvas-start text-bg-dark"
          tabindex="-1"
          id="offcanvasDarkNavbar"
          aria-labelledby="offcanvasDarkNavbarLabel"
        >
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">
              {% trans "Menu" %}
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a href="/" class="navLink">{% trans "Home" %}</a>
              </li>
              <li class="nav-item">
                <a href="/" class="navLink">{% trans "Plates" %}</a>
              </li>
              <li class="nav-item">
                <a href="{% url 'plates:sell_plate' %}" class="navLink"
                  >{% trans "Sell Your Plate" %}</a
                >
              </li>
              <li class="nav-item">
                <a href="{% url 'plates:draw_plate' %}" class="navLink"
                  >{% trans "Design Your Plate" %}</a
                >
              </li>
              <li class="nav-item">
                <a href="{% url 'admin:index' %}" class="navLink"
                  >{% trans "Login" %}</a
                >
              </li>
              <li class="nav-item">
                <a href="#" class="navLink">{% trans "FAQ" %}</a>
              </li>
              <li class="nav-item">
                <a href="{% url 'plates:contact' %}" class="navLink"
                  >{% trans "Contact Us" %}</a
                >
              </li>
              <li>
                <form
                  action="{% url 'set_language' %}"
                  method="post"
                  style="display: inline"
                >
                  {% csrf_token %}
                  <input
                    type="hidden"
                    name="next"
                    value="{{ request.get_full_path }}"
                  />
                  {% if LANGUAGE_CODE == 'ar' %}
                  <a
                    class="btnPage1"
                    href="#"
                    onclick="this.closest('form').submit(); return false;"
                    >English</a
                  >
                  <input type="hidden" name="language" value="en" />
                  {% else %}
                  <a
                    class="btnPage1"
                    href="#"
                    onclick="this.closest('form').submit(); return false;"
                    >العربية</a
                  >
                  <input type="hidden" name="language" value="ar" />
                  {% endif %}
                </form>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    {% block content %}{% endblock %}

    <footer>
      <div class="footer-container">
        <div class="contact-details">
          <h4>{% trans "Contact Us" %}</h4>
          <p id="address">
            {% if SITE_SETTINGS and SITE_SETTINGS.address %} {{
            SITE_SETTINGS.address }} {% else %} {% trans "UAE, Abu Dhabi, Al
            ain" %} {% endif %}
          </p>
          <p>
            {% trans "Phone" %}:
            <span dir="ltr"
              >{{ SITE_SETTINGS.phone|default:"+971 50 880 0121" }}</span
            >
          </p>
          <p>
            {% trans "Email" %}: {{
            SITE_SETTINGS.email|default:"info@h3auctions.ae" }}
          </p>
          <div class="social-links">
            {% if SITE_SETTINGS and SITE_SETTINGS.instagram %}
            <a href="{{ SITE_SETTINGS.instagram }}" target="_blank"></a>
            {% endif %}
          </div>
        </div>
        <div class="quick-links">
          <h4>{% trans "Quick Links" %}</h4>
          <a href="/">{% trans "Home" %}</a>
          <a href="{% url 'plates:contact' %}">{% trans "Contact" %}</a>
        </div>
      </div>
      <hr />
      <div class="copy_rights">
        <p>© {% now "Y" %} H3 Auctions. {% trans "All rights reserved." %}</p>
      </div>
    </footer>

    <div id="disclaimer-popup" style="display: none">
      <div class="popup-overlay"></div>
      <div class="popup-content">
        <img src="{% static 'css/disclamer.png' %}" alt="Disclaimer" />
        <button id="close-popup" class="btn btn-primary mt-2">
          {% trans "I understand & agree" %}
        </button>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const popup = document.getElementById("disclaimer-popup");
        const closeBtn = document.getElementById("close-popup");

        if (!popup || !closeBtn) return;

        const popupKey = "h3_disclaimerDismissedAt";
        const oneDay = 24 * 60 * 60 * 1000; // milliseconds in 1 day

        const lastDismissed = localStorage.getItem(popupKey);
        const now = new Date().getTime();

        // Show popup if never dismissed or dismissed more than 1 day ago
        if (!lastDismissed || now - parseInt(lastDismissed) > oneDay) {
          popup.style.display = "flex";
          popup.style.alignItems = "center";
          popup.style.justifyContent = "center";
          popup.style.position = "fixed";
          popup.style.top = "0";
          popup.style.left = "0";
          popup.style.width = "100%";
          popup.style.height = "100%";
          popup.style.zIndex = "9999";
        }

        closeBtn.addEventListener("click", function () {
          popup.style.display = "none";
          localStorage.setItem(popupKey, new Date().getTime().toString());
        });

        // Close on overlay click
        const overlay = popup.querySelector(".popup-overlay");
        if (overlay) {
          overlay.addEventListener("click", function () {
            popup.style.display = "none";
            localStorage.setItem(popupKey, new Date().getTime().toString());
          });
        }
      });
    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
